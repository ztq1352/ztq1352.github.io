<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vue学习(九) | Tsang的博客</title><meta name="keywords" content="vue"><meta name="author" content="Tsang"><meta name="copyright" content="Tsang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3了解Vue312345678910111213141516171819202122231. vue3 官网地址：https:&#x2F;&#x2F;cn.vuejs.org&#x2F;2. vue3 发布时间：2020 年 9 月 18 日3. 版本迭代历史：https:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;core&#x2F;releases4. vue3 做了哪些改动    (1) 最核心的虚拟 DOM 算法进行了重写。">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue学习(九)">
<meta property="og:url" content="https://ztq1352.github.io/2023/06/19/vue09/index.html">
<meta property="og:site_name" content="Tsang的博客">
<meta property="og:description" content="Vue3了解Vue312345678910111213141516171819202122231. vue3 官网地址：https:&#x2F;&#x2F;cn.vuejs.org&#x2F;2. vue3 发布时间：2020 年 9 月 18 日3. 版本迭代历史：https:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;core&#x2F;releases4. vue3 做了哪些改动    (1) 最核心的虚拟 DOM 算法进行了重写。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2023/06/19/pC3VkWV.png">
<meta property="article:published_time" content="2023-06-19T08:10:25.320Z">
<meta property="article:modified_time" content="2023-06-19T08:10:09.245Z">
<meta property="article:author" content="Tsang">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2023/06/19/pC3VkWV.png"><link rel="shortcut icon" href="https://s1.ax1x.com/2023/05/25/p9HMD0J.jpg"><link rel="canonical" href="https://ztq1352.github.io/2023/06/19/vue09/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-19 16:10:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://s1.ax1x.com/2023/05/25/p9HMD0J.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s1.ax1x.com/2023/06/19/pC3VkWV.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Tsang的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue学习(九)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-19T08:10:25.320Z" title="发表于 2023-06-19 16:10:25">2023-06-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-19T08:10:09.245Z" title="更新于 2023-06-19 16:10:09">2023-06-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>52分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue学习(九)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><h2 id="了解Vue3"><a href="#了解Vue3" class="headerlink" title="了解Vue3"></a>了解Vue3</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1. vue3 官网地址：https://cn.vuejs.org/</span><br><span class="line"></span><br><span class="line">2. vue3 发布时间：2020 年 9 月 18 日</span><br><span class="line"></span><br><span class="line">3. 版本迭代历史：https://github.com/vuejs/core/releases</span><br><span class="line"></span><br><span class="line">4. vue3 做了哪些改动</span><br><span class="line">    (1) 最核心的虚拟 DOM 算法进行了重写。</span><br><span class="line">    (2) 支持 tree shaking：在前端的性能优化中，es6 推出了 tree shaking 机制，tree shaking 就是当我们在项目中引入其他模块时，他会自动将我们用不到的代码，或者永远不会执行的代码摇掉</span><br><span class="line">    (3) 最核心的响应式由 Object.defineProperty 修改为 Proxy 实现。</span><br><span class="line">    (4) 更好的支持 TS（Type Script：TypeScript 是微软开发的一个开源的编程语言，通过在 JavaScript 的基础上添加静态类型定义构建而成。TypeScript 通过 TypeScript 编译器或 Babel 转译为 JavaScript 代码，可运行在任何浏览器，任何操作系统。）</span><br><span class="line">    (5) ......</span><br><span class="line"></span><br><span class="line">5. vue3 比 vue2 好在哪</span><br><span class="line">	与 Vue 2 相比，Vue 3 在捆绑包大小（通过树抖动可轻 41%）、初始渲染（快 55%）、更新（快133%）和内存使用（少 54%）方面都有了显著的性能改进。</span><br><span class="line">	</span><br><span class="line">6. Vue3 的新特性</span><br><span class="line">	(1) 新的生命周期钩子</span><br><span class="line">	(2) 键盘事件不再支持 keyCode。例如：v-on:keyup.enter 支持，v-on:keyup.13 不支持。</span><br><span class="line">	(3) 组合式 API（Composition API）</span><br><span class="line">	(4) 新增了一些内置组件</span><br><span class="line">	(5) data 必须是一个函数。</span><br><span class="line">	(6) ......</span><br></pre></td></tr></table></figure>

<h2 id="vue3工程创建"><a href="#vue3工程创建" class="headerlink" title="vue3工程创建"></a>vue3工程创建</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. vue2工程是怎么创建的?</span><br><span class="line">	通过vue-cli脚手架来完成创建的。</span><br><span class="line">	vue-cli脚手架是基于webpack项目构建工具实现的</span><br><span class="line">	</span><br><span class="line">2. vue3工程也可以通过vue-cli创建。但目前更加流行的方式不是采用vue-cli来创建。目前比较流行的方式是: 采用另一个脚手架create-vue来完成vue3工程的创建。</span><br><span class="line"></span><br><span class="line">3. create-vue这个脚手架是基于vite项目构建工具来实现的。(vite和webpack一样，都是项目构建工具。)</span><br><span class="line"></span><br><span class="line">4. vite的特点: 服务器启动速度非常快，然后代码修改之后，更新非常快。这是使用vite的最主要原因。</span><br><span class="line"></span><br><span class="line">5. vite比webpack性能要好很多。vite是尤雨溪团队开发的</span><br><span class="line"></span><br><span class="line">6. vue2 --&gt; vue-cli --&gt; webpack</span><br><span class="line"></span><br><span class="line">7. vue3 --&gt; create-vue --&gt; vite</span><br></pre></td></tr></table></figure>

<h3 id="vue-cli脚手架创建vue3"><a href="#vue-cli脚手架创建vue3" class="headerlink" title="vue -cli脚手架创建vue3"></a>vue -cli脚手架创建vue3</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1. 确认vue-cli版本，要求最低4.5.0</span><br><span class="line">	升级脚手架版本：npm install -g @vue-cli</span><br><span class="line">	</span><br><span class="line">2. 创建vue3工程</span><br><span class="line">	vue create 工程名</span><br><span class="line">	</span><br><span class="line">3. 目录结构以及文件和 vue2 相同。</span><br><span class="line"></span><br><span class="line">4. main.js 文件说明</span><br><span class="line">    // 在Vue3当中，不再引入Vue了，引入了一个createApp函数，这个函数可以创建app对象。</span><br><span class="line">    import &#123; createApp &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    // 引入了一个根组件App</span><br><span class="line">    import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">    // 这行代码表示创建了一个app对象</span><br><span class="line">    // 这个app对象类似于Vue2当中的vm。</span><br><span class="line">    // app和vm的区别是：app更加轻量级。(app上的属性更少一些)</span><br><span class="line">    const app = createApp(App)</span><br><span class="line"></span><br><span class="line">    // 将app挂载到指定位置</span><br><span class="line">    app.mount(&#x27;#app&#x27;)</span><br><span class="line"></span><br><span class="line">    // unmount()，这个方法可以卸载组件。</span><br><span class="line">    // 3秒之后卸载掉。</span><br><span class="line">    /* setTimeout(() =&gt; &#123;</span><br><span class="line">        app.unmount(&#x27;#app&#x27;)</span><br><span class="line">    &#125;, 3000) */</span><br><span class="line">    </span><br><span class="line">5. vue3 中 template 标签下可以有多个根标签了。</span><br></pre></td></tr></table></figure>

<h3 id="create-vue脚手架创建"><a href="#create-vue脚手架创建" class="headerlink" title="create-vue脚手架创建"></a>create-vue脚手架创建</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1. create-vue 是什么？</span><br><span class="line">	(1) 和 vue-cli 一样，也是一个脚手架。</span><br><span class="line">    (2) vue-cli 创建的是 webpack+vue 项目的脚手架工具。</span><br><span class="line">    (3) create-vue 创建的是 vite+vue 项目的脚手架工具。</span><br><span class="line">    (4) webpack 和 vite 都是前端的构建工具。</span><br><span class="line">    </span><br><span class="line">2. vite 官网</span><br><span class="line">	(1) https://vitejs.cn/</span><br><span class="line">	</span><br><span class="line">3. vite 是什么？（vite 被翻译为：快）</span><br><span class="line">	(1) vite 是一个构建工具，作者尤雨溪。</span><br><span class="line">	</span><br><span class="line">4. vite 有那些提升？</span><br><span class="line">	至少服务器启动速度快、更新速度快了。</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用 create vue 创建 Vue3 工程</span><br><span class="line">    (1) 官方指导：https://cn.vuejs.org/guide/quick-start.html</span><br><span class="line">    (2) 安装 create-vue 脚手架并创建 vue3 项目：npm init vue@latest</span><br><span class="line">    	执行时，如果检测到没有安装 create-vue 脚手架时会安装脚手架。如果检测到已经安装过脚手架，则直接创建项目。</span><br><span class="line">进入创建的项目目录，npm install</span><br><span class="line"></span><br><span class="line">运行项目：npm run dev</span><br><span class="line"></span><br><span class="line">访问 5173 端口</span><br></pre></td></tr></table></figure>

<h4 id="vue3工程说明"><a href="#vue3工程说明" class="headerlink" title="vue3工程说明"></a>vue3工程说明</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 和 vue-cli 脚手架创建的区别</span><br><span class="line">	(1) index.html 文件不再放到 public 目录下了。</span><br><span class="line">		1) vite 官方的解释是：让 index.html 成为入口。（vue-cli 脚手架生成的项目入口是：main.js）</span><br><span class="line">    (2) vue-cli 的配置文件 vue.config.js。create-vue 脚手架的配置文件：vite.config.js</span><br><span class="line">    	1) vite.config.js 能配置什么？可以参考 vite 官网：https://cn.vitejs.dev/config/ 例如配置代理服务器和</span><br><span class="line">    以前就不太一样了。</span><br></pre></td></tr></table></figure>

<h3 id="Proxy实现原理"><a href="#Proxy实现原理" class="headerlink" title="Proxy实现原理"></a>Proxy实现原理</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Vue2 的响应式核心：Object.defineProperty</span><br><span class="line">Vue3 的响应式核心：Window.Proxy(ES6的新特性)</span><br><span class="line"></span><br><span class="line">Object.defineProperty：这种方式只能对修改(set)和读取(get)进行拦截。</span><br><span class="line">    所以当给对象新增一个属性，或者删除对象的某个属性时，不会经过set和get，导致无法实现响应式。</span><br><span class="line">    并且通过数组下标去修改数组中的数据，也不会实现响应式处理。</span><br><span class="line"></span><br><span class="line">ES6新特性：window.Proxy对象。</span><br><span class="line">	通过Proxy可以创建一个代理对象。</span><br><span class="line">	语法规则：</span><br><span class="line">		let proxyObj = new Proxy(targetObj, &#123;</span><br><span class="line">			get(target, propertyName)&#123;</span><br><span class="line">				//return target[propertyName]</span><br><span class="line">				return reflect.get(target, propertyName) //反射机制reflect对象</span><br><span class="line">			&#125;,</span><br><span class="line">			set(target, propertyName, value)&#123;</span><br><span class="line">				//target[propertyName] = value</span><br><span class="line">				reflect.set(target, propertyName, value)</span><br><span class="line">			&#125;,</span><br><span class="line">			deleteProperty(target, propertyName)&#123;</span><br><span class="line">				//return delete target[propertyName]</span><br><span class="line">				return reflect.deleteProperty(target, propertyName)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="setup配置项"><a href="#setup配置项" class="headerlink" title="setup配置项"></a>setup配置项</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. 是vue3新增的配置项，是一个函数</span><br><span class="line"></span><br><span class="line">2. 在setup函数体当中编写 data、methods、computed、watch、生命周期钩子函数....，这是vue3与vue2的区别</span><br><span class="line"></span><br><span class="line">3. setup 函数的返回值：</span><br><span class="line">    (1) 返回一个对象，该对象的属性、方法等均可以在模板语法中使用，例如插值语法。</span><br><span class="line">    (2) 返回一个渲染函数，从而执行渲染函数，渲染页面。</span><br><span class="line">        1） import &#123;h&#125; from ‘vue’ （引入渲染函数）</span><br><span class="line">        2） return ()=&gt;&#123;h(‘h2’, ‘欢迎大家学习 Vue3’)&#125;</span><br><span class="line">        </span><br><span class="line">4. vue3 中可以编写 vue2 语法，向下兼容的。但是不建议。更不建议混用。</span><br><span class="line"></span><br><span class="line">5. setup 中的 this 是 undefined。所以 setup 中 this 是不可用的。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;h2&gt;姓名：&#123;&#123;a&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  &lt;h2&gt;年龄：&#123;&#123;b&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  &lt;button @click=&quot;sh&quot;&gt;SAY HI&lt;/button&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sayHi(&#x27;jack&#x27;, 20, $event)&quot;</span>&gt;</span>SAY HI<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 导入一个渲染函数</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;h&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 如果你把data、methods、computed...还是配置到这里的话，表示你还是使用了vue2的语法规则。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 如果你使用了vue3，建议不要在出现vue2的语法，不建议vue3 + vue2混合使用。</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// vue2仍然可以用。但是不建议了。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* data() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name : &#x27;jackson&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;, */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. setup是vue3当中新增的一个配置项。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. setup是一个函数。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 在setup函数体当中编写 data、methods、computed、watch、生命周期钩子函数....</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// setup函数中没有this。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 数据data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 在setup函数体当中定义的这个变量，可以看做是之前的data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> age = <span class="number">20</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 函数methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* function sayHi()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        //alert(&#x27;hello vue3!!!!&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        alert(`姓名：$&#123;name&#125;，年龄：$&#123;age&#125;`)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        alert(name + &#x27;,&#x27; + age)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">sayHi</span>(<span class="params">a, b, e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(a + <span class="string">&#x27;,&#x27;</span> + b)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(e.<span class="property">target</span>.<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果你想在模板语法当中使用name和age</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 就必须将name和age封装成一个对象，然后作为setup函数的返回值返回即可。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 当然这个对象当中也可以有函数。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//必须返回才能使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        a : name,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        b : age,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        sh : sayHi</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name : name,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        age : age,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        sayHi : sayHi</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript">	  <span class="comment">//简化</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;name, age, sayHi&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 可以返回一个渲染函数</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return function()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        return h(&#x27;h1&#x27;, &#x27;welcome to study vue3!!!&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript">	  <span class="comment">//简化</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//return () =&gt; h(&#x27;h2&#x27;, &#x27;欢迎学习vue3!!!&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ref函数-实现响应式"><a href="#ref函数-实现响应式" class="headerlink" title="ref函数(实现响应式)"></a>ref函数(实现响应式)</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. ref 是一个函数。完成响应式的。</span><br><span class="line">2. ref 使用时需要 import</span><br><span class="line">	(1) import &#123;ref&#125; from ‘vue’ </span><br><span class="line">3. 凡是要实现响应式的 data，需要使用 ref 函数进行包裹</span><br><span class="line">    (1) let name = ref(‘李四’)</span><br><span class="line">    (2) 输出 name，你会发现，它是 RefImpl 对象（引用实现的实例对象，简称引用对象），在这个引用对象</span><br><span class="line">		当中有一个 value 属性，value 属性的实现原理是：Object.defineProperty，通过它实现了响应式处理。</span><br><span class="line">4. 修改数据的话必须这样做：name.value = ‘王五</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改用户信息&lt;/button&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 在模板语法当中访问RefImpl对象的时候，不需要手动 .value --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;nameRefImpl&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;ageRefImpl&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;modifyInfo&quot;</span>&gt;</span>修改用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 使用ref函数实现data响应式</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ref对&#x27;张三&#x27;这个数据进行包裹，然后返回了一个全新的对象：引用对象RefImpl</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// RefImpl对象中有value属性，这个value属性是具有响应式的，并且这个value底层使用了Object.defineProperty完成了响应式。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// RefImpl对象的value属性，有对应的set和get</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 当读取RefImpl对象的value属性时：get执行。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 当修改RefImpl对象的value属性时：set执行。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> nameRefImpl = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> ageRefImpl = <span class="title function_">ref</span>(<span class="number">30</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">modifyInfo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        nameRefImpl.<span class="property">value</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        ageRefImpl.<span class="property">value</span> = <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象（只有返回了，这些数据、函数才能在模板语法中使用）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;nameRefImpl, ageRefImpl, modifyInfo&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 以下代码没有响应式</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* setup()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 数据data</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 通过测试得知，如果当前的data这样写，是没有响应式的。</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      let name = &#x27;张三&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      let age = 20</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 方法methods</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      function modifyInfo()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(666)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        // 修改这个数据data时，有没有响应式</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name = &#x27;李四&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        age = 30</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 返回一个对象</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;name, age, modifyInfo&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125; */</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ref函数包裹对象实现响应式"><a href="#ref函数包裹对象实现响应式" class="headerlink" title="ref函数包裹对象实现响应式"></a>ref函数包裹对象实现响应式</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果ref包裹的是一个基本数据类型，响应式是Object.defineProperty实现</span><br><span class="line">如果ref包裹的是一个对象，响应式是Object.defineProperty + Proxy实现的。</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;userRefImpl.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;userRefImpl.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;counterRefImpl&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>城市：&#123;&#123;userRefImpl.addr.city&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>街道：&#123;&#123;userRefImpl.addr.street&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;modifyUser&quot;</span>&gt;</span>修改用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果ref包裹的是一个基本数据类型，响应式是如何实现的？Object.defineProperty</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> counterRefImpl = <span class="title function_">ref</span>(<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(counterRefImpl)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果ref包裹的是一个对象，响应式是如何实现的？Object.defineProperty + Proxy 实现的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// Proxy实现的响应式，对象中的对象，对象中的对象，都有响应式处理。（底层是递归处理了。）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> userRefImpl = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;jack&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        age : <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">        addr : &#123;</span></span><br><span class="line"><span class="language-javascript">          city : <span class="string">&#x27;北京&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          street : <span class="string">&#x27;大兴区凉水河二街&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(userRefImpl)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">modifyUser</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 这种修改是有响应式处理的。</span></span></span><br><span class="line"><span class="language-javascript">        counterRefImpl.<span class="property">value</span> = <span class="number">200</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 对于userRefImpl对象来说，应该怎么改，才能有响应式呢？</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 如果你采用这种value直接赋值的方式，表示这种响应式是基于Object.defineProperty的。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* userRefImpl.value = &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          name : &#x27;张三&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          age : 50</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// userRefImpl.value 是一个代理对象Proxy: userProxy对象。</span></span></span><br><span class="line"><span class="language-javascript">        userRefImpl.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        userRefImpl.<span class="property">value</span>.<span class="property">age</span> = <span class="number">90</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 修改地址信息</span></span></span><br><span class="line"><span class="language-javascript">        userRefImpl.<span class="property">value</span>.<span class="property">addr</span>.<span class="property">city</span> = <span class="string">&#x27;邯郸&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        userRefImpl.<span class="property">value</span>.<span class="property">addr</span>.<span class="property">street</span> = <span class="string">&#x27;太极二路&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;userRefImpl, counterRefImpl, modifyUser&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* setup() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // data</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 如果这里是一个对象的话，默认也是没有响应式处理的。</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      let user = &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name : &#x27;jack&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        age : 20</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // methods</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      function modifyUser()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        user.name = &#x27;lucy&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        user.age = 30</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 返回对象</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;user, modifyUser&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125; */</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="reactive函数实现响应式"><a href="#reactive函数实现响应式" class="headerlink" title="reactive函数实现响应式"></a>reactive函数实现响应式</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">注意：这个函数不能为简单类型服务，只能为对象类型服务。</span><br><span class="line"></span><br><span class="line">注意：reactive 为响应式做了递归处理。对象中的对象中的对象的属性，也是响应式的。</span><br><span class="line"></span><br><span class="line">重点 1：</span><br><span class="line">并且数组如果使用 reactive 函数包裹的话，数组中的数据，在通过下标去修改的时候，也是支持响应式的。（这个在 Vue2 中是不支持的。）</span><br><span class="line"></span><br><span class="line">重点 2：</span><br><span class="line">在开发中一般很少使用 ref，一般会使用 reactive。即使是简单类型的数据，也会将其存放到一个对象中，使用reactive 函数进行包括。</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;userProxy.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;userProxy.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;userProxy.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>城市：&#123;&#123;userProxy.addr.city&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>街道：&#123;&#123;userProxy.addr.street&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>test：&#123;&#123;userProxy.addr.a.b.c&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别：&#123;&#123;userProxy.sex&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>选课列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(c,index) in userProxy.courses&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;index&#125;&#125;, &#123;&#123;c&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;modifyUser&quot;</span>&gt;</span>修改用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addSex&quot;</span>&gt;</span>添加sex属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;delSex&quot;</span>&gt;</span>删除sex属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;modifyCourse&quot;</span>&gt;</span>修改课程<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 基本数据类型不能使用reactive包裹。如果是基本数据类型，请使用ref。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//let counter = reactive(200)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// reactive函数，可以将一个对象直接包裹。实现响应式。底层是生成一个Proxy对象。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> userProxy = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        age : <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">        counter : <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript">        addr : &#123;</span></span><br><span class="line"><span class="language-javascript">          city : <span class="string">&#x27;北京&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          street : <span class="string">&#x27;大兴区凉水河二街&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          a : &#123;</span></span><br><span class="line"><span class="language-javascript">            b : &#123;</span></span><br><span class="line"><span class="language-javascript">              c : <span class="number">111</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        courses : [<span class="string">&#x27;语文&#x27;</span>, <span class="string">&#x27;数学&#x27;</span>, <span class="string">&#x27;英语&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(userProxy)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">modifyUser</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">age</span> = <span class="number">50</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">counter</span> = <span class="number">500</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">addr</span>.<span class="property">city</span> = <span class="string">&#x27;邯郸&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">addr</span>.<span class="property">street</span> = <span class="string">&#x27;太极二路&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">addr</span>.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">addSex</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 添加性别</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">delSex</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 删除性别</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">delete</span> userProxy.<span class="property">sex</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">modifyCourse</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 通过数组下标修改数组，会不会有响应式呢？</span></span></span><br><span class="line"><span class="language-javascript">        userProxy.<span class="property">courses</span>[<span class="number">2</span>] = <span class="string">&#x27;政治&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;userProxy, modifyUser, addSex, delSex, modifyCourse&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3中的props"><a href="#vue3中的props" class="headerlink" title="vue3中的props"></a>vue3中的props</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">给组件 User 传数据,User 组件使用 props 接收数据</span><br><span class="line">在 setup 函数中如何使用 props？</span><br><span class="line">	setup 的第一个参数就是 props。可以直接拿来用。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-1"><a href="#App-vue-1" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">User</span> <span class="attr">name</span>=<span class="string">&quot;张三&quot;</span> <span class="attr">age</span>=<span class="string">&quot;30&quot;</span> <span class="attr">:sex</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">User</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./components/User.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 直接在大括号当中进行的配置，叫做：选项式API（options api）</span></span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">User</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 在setup函数体当中进行的配置，使用的API叫做组合式API。(ref、reactive这些都属于组合式API。)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> sex = <span class="title function_">ref</span>(<span class="string">&#x27;男&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;sex&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="User-vue"><a href="#User-vue" class="headerlink" title="User.vue"></a>User.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别：&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;User&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 使用props配置项 接收父组件传递过来的数据。</span></span></span><br><span class="line"><span class="language-javascript">        props : [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在setup函数中如何使用这个props呢？</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// setup函数中可没有this这个关键字！！！！</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 将来vue3调用setup函数之前，会给setup函数传递参数，第一个参数是：props</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params">props</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// props被包装成了一个代理对象，也是具有响应式的Proxy对象。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(props)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">name</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">age</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">sex</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3生命周期"><a href="#vue3生命周期" class="headerlink" title="vue3生命周期"></a>vue3生命周期</h2><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pClcXtJ"><img src="https://s1.ax1x.com/2023/06/18/pClcXtJ.png" alt="pClcXtJ.png"></a></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. vue2 中</span><br><span class="line">    (1) beforeDestroy</span><br><span class="line">    (2) destroyed</span><br><span class="line">2. vue3 中</span><br><span class="line">    (1) beforeUnmount</span><br><span class="line">    (2) unmounted</span><br><span class="line">3. vue3 中仍然可以使用配置项方式提供生命周期钩子函数。但也可以使用组合式 API 方式。如果采用组合式 API方式，API 名称规律如下：</span><br><span class="line">    (1) beforeCreate =&gt; setup</span><br><span class="line">    (2) created =&gt; setup</span><br><span class="line">    (3) beforeMount =&gt; onBeforeMount</span><br><span class="line">    (4) mounted =&gt; onMounted</span><br><span class="line">    (5) beforeUpdate =&gt; onBeforeUpdate</span><br><span class="line">    (6) updated =&gt; onUpdated</span><br><span class="line">    (7) beforeUnmount =&gt; onBeforeUnmount</span><br><span class="line">    (8) unmounted =&gt; onUnmounted</span><br><span class="line">4. 当然如果需要使用 beforeCreate 和 created 钩子，可以采用 vue2 的语法：配置项形式。vue2 和 vue3 语法可以共存，但不建议</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-2"><a href="#App-vue-2" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isDisplay = !isDisplay&quot;</span>&gt;</span>显示或隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">User</span> <span class="attr">v-if</span>=<span class="string">&quot;isDisplay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">User</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./components/User.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">User</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//console.log(&#x27;setup：安装组合式API&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> isDisplay = <span class="title function_">ref</span>(<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;isDisplay&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* beforeCreate()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      console.log(&#x27;beforeCreate&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      console.log(&#x27;正在初始化选项式API&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    created()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      console.log(&#x27;选项式API初始化完成&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      console.log(&#x27;created&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125; */</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="User-vue-1"><a href="#User-vue-1" class="headerlink" title="User.vue"></a>User.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>计数<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;ref, onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;User&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setup...&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 采用组合式API：生命周期钩子函数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onBeforeMount&#x27;</span>)    </span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onMounted&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onBeforeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onBeforeUpdate&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onUpdated&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onBeforeUnmount&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onUnmounted&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;counter&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 选项式API</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">beforeCreate</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在Vue3当中，生命周期钩子函数有两种写法：</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 第一种写法：选项式API（以下这种方式就是选项式API）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 第二种写法：组合式API</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* beforeCreate()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;beforeCreate&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        created()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;created&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        beforeMount()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;beforeMount&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        mounted()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;mounted&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        beforeUpdate()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;beforeUpdate&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        updated()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;updated&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        beforeUnmount()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;beforeUnmount&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        unmounted()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            console.log(&#x27;unmounted&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125; */</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3的自定义事件"><a href="#vue3的自定义事件" class="headerlink" title="vue3的自定义事件"></a>vue3的自定义事件</h2><pre><code>### App.vue
</code></pre>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 给User组件绑定自定义事件。 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">User</span> @<span class="attr">event1</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">User</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./components/User.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">User</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">showInfo</span>(<span class="params">name, age</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">`姓名：<span class="subst">$&#123;name&#125;</span>，年龄：<span class="subst">$&#123;age&#125;</span>岁`</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;showInfo&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="User-vue-2"><a href="#User-vue-2" class="headerlink" title="User.vue"></a>User.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;triggerEvent1&quot;</span>&gt;</span>触发event1事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;User&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// context代表组件上下文对象。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// context是setup当中的第二个参数。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params">props, context</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">triggerEvent1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 触发事件event1，传递数据。</span></span></span><br><span class="line"><span class="language-javascript">                context.<span class="title function_">emit</span>(<span class="string">&#x27;event1&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">50</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;triggerEvent1&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3的全局事件总线"><a href="#vue3的全局事件总线" class="headerlink" title="vue3的全局事件总线"></a>vue3的全局事件总线</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 安装 mitt</span><br><span class="line">	(1) npm i mitt</span><br><span class="line">2. 封装 event-bus.js 文件(src下新建util目录)</span><br><span class="line"></span><br><span class="line">3.需要触发和绑定的组件需要导入js文件</span><br></pre></td></tr></table></figure>

<h3 id="event-bus-js"><a href="#event-bus-js" class="headerlink" title="event-bus.js"></a>event-bus.js</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import mitt from &#x27;mitt&#x27;</span><br><span class="line"></span><br><span class="line">export default mitt()</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-3"><a href="#App-vue-3" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">User</span>&gt;</span><span class="tag">&lt;/<span class="name">User</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 导入全局事件总线对象</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;./utils/event-bus.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./components/User.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 引入组合式API：生命周期钩子</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">User</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 生命周期钩子：mounted</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 给全局事件总线绑定事件</span></span></span><br><span class="line"><span class="language-javascript">        emitter.<span class="title function_">on</span>(<span class="string">&#x27;event1&#x27;</span>, showInfo)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">showInfo</span>(<span class="params">user</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">`姓名：<span class="subst">$&#123;user.name&#125;</span>，年龄：<span class="subst">$&#123;user.age&#125;</span>岁`</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;showInfo&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="User-vue-3"><a href="#User-vue-3" class="headerlink" title="User.vue"></a>User.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;triggerEvent1&quot;</span>&gt;</span>触发全局事件总线上的event1事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clearAllEvent&quot;</span>&gt;</span>解除全局事件总线上的所有绑定的事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clearEvent1&quot;</span>&gt;</span>解除全局事件总线上的event1事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;../utils/event-bus.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;User&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">triggerEvent1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 触发全局事件总线上的事件event1</span></span></span><br><span class="line"><span class="language-javascript">                emitter.<span class="title function_">emit</span>(<span class="string">&#x27;event1&#x27;</span>, &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">30</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">clearAllEvent</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 清除总线上绑定的所有事件。</span></span></span><br><span class="line"><span class="language-javascript">                emitter.<span class="property">all</span>.<span class="title function_">clear</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">clearEvent1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 解绑指定的事件</span></span></span><br><span class="line"><span class="language-javascript">                emitter.<span class="title function_">off</span>(<span class="string">&#x27;event1&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;triggerEvent1, clearAllEvent, clearEvent1&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3的计算属性"><a href="#vue3的计算属性" class="headerlink" title="vue3的计算属性"></a>vue3的计算属性</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123;computed&#125; from ‘vue’ //computed 是一个组合式的 API。</span><br><span class="line">setup()&#123;</span><br><span class="line">    // 简写</span><br><span class="line">    let reversedName = computed(()=&gt;&#123;    &#125;)</span><br><span class="line">    // 完整写法</span><br><span class="line">    let reversedName = computed(&#123;</span><br><span class="line">        get()&#123;&#125;, </span><br><span class="line">        set(value)&#123;&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">计算属性最重要的特征是：只要计算属性关联的数据发生变化，计算属性的回调函数就会执行。所以计算属性关联的数据必须是具有响应式的</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-4"><a href="#App-vue-4" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  反转之后的姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;reversedName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; computed, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// vue3的计算属性，computed是一个组合式的API。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// computed简写</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* let reversedName = computed(() =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        // 这种写法是一种简写形式，如果你只需要使用计算属性的get方法的话。</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        return data.name.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// computed完整写法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> reversedName = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 读取计算属性的值的时候执行。</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> data.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 当修改计算属性的值的时候执行。</span></span></span><br><span class="line"><span class="language-javascript">          data.<span class="property">name</span> = val.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data, reversedName&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* data() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name : &#x27;&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    computed : &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 完整写法</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      reversedName : &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        get()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          return this.name.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        set(value)&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 简写形式</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      reversedName()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        return this.name.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125; */</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3侦听属性"><a href="#vue3侦听属性" class="headerlink" title="vue3侦听属性"></a>vue3侦听属性</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import &#123;watch&#125; from ‘vue’ //watch 就是组合式 API。</span><br><span class="line">1. 监视 ref 定义的一个响应式数据</span><br><span class="line">	(1) watch(数据, (newValue, oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">2. 监视 ref 定义的多个响应式数据</span><br><span class="line">	(1) watch(数据 1, (newValue, oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	(2) watch(数据 2, (newValue, oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	或者</span><br><span class="line">	(3) watch([数据 1,数据 2], (newValue, oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">3. immediate 在哪里写？</span><br><span class="line">	(1) 在 watch 的第三个参数位置上使用一个对象：&#123;immediate : true, deep:true&#125;</span><br><span class="line">	</span><br><span class="line">4. 监视 reactive 定义的响应式数据。注意：oldValue 拿不到</span><br><span class="line">	(1) watch(数据, (newValue, oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">5. 如果监视的 reactive 定义的响应式数据。强制开启了深度监视，配置 deep 无效。默认就是监视对象的全部属性。</span><br><span class="line"></span><br><span class="line">6. 如果要监视对象中的某个属性怎么办？被监视的数据必须是一个函数，将要监视的数据返回</span><br><span class="line">	(1) watch(()=&gt;user.age, (newValue,oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">7. 如果要监视对象中的某些属性怎么办？</span><br><span class="line">	(1) watch([()=&gt;user.age, ()=&gt;user.name], (newValue,oldValue)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">8. 如果要监视 reactive 定义的响应式数据中的某个属性，这个属性是一个对象形式，那么开启 deep:true 是可以的。</span><br><span class="line">	(1) watch(()=&gt;user.address, (newVal, oldVal)=&gt;&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">9. 关于 ref 包裹对象时的 value</span><br><span class="line">    (1) watch(name.value, (newVal, oldVal)&#123;&#125;) //监视无效</span><br><span class="line">    (2) watch(user.value, (newVal, oldVal)=&gt;&#123;&#125;)//监视有效</span><br><span class="line">    (3) watch(user,(newVal, oldVal)=&gt;&#123;&#125;, &#123;deep:true&#125;) // 深度监视生效</span><br></pre></td></tr></table></figure>

<h4 id="vue3侦听ref数据"><a href="#vue3侦听ref数据" class="headerlink" title="vue3侦听ref数据"></a>vue3侦听ref数据</h4><h5 id="App-vue-5"><a href="#App-vue-5" class="headerlink" title="App.vue"></a>App.vue</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器2：&#123;&#123;counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter2++&quot;</span>&gt;</span>计数器2加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;watch, ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//vue3当中如何进行属性的监视/侦听</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//组合式API： watch</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> counter2 = <span class="title function_">ref</span>(<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// watch</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 被监视的数据需要具有响应式。</span></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">/*  watch(counter, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(&#x27;计数器&#x27;, newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;, &#123;immediate : true, deep : true&#125;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      watch(counter2, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         console.log(&#x27;计数器2&#x27;, newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;, &#123;immediate : true&#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 采用数组的方式，一次性监视多个属性。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">watch</span>([counter, counter2], <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;counter, counter2&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* data() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter : 1</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch : &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 简写形式</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 监视的是counter属性。</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 注意：被监视的属性必须是具有响应式的，才能监视。</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // counter(newValue, oldValue)&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      //   console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 完整写法</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      counter : &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        immediate : true, //开始的时候，立即执行一次handler</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        deep : true, //启用深度监视</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        handler(newValue, oldValue)&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125; */</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="App-vue-6"><a href="#App-vue-6" class="headerlink" title="App.vue"></a>App.vue</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;counterRefImpl&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counterRefImpl++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.a.b.c.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.a.b.c.counter++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;watch, ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> counterRefImpl = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        a : &#123;</span></span><br><span class="line"><span class="language-javascript">          b : &#123;</span></span><br><span class="line"><span class="language-javascript">            c : &#123;</span></span><br><span class="line"><span class="language-javascript">              counter : <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 监视data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// oldValue又是拿不到。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// deep配置无效。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(data.value, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;, &#123;deep : false&#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data是一个RefImpl对象。支持deep配置的。默认是没有开启深度监视的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">watch</span>(data, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">      &#125;, &#123;deep : <span class="literal">true</span>&#125;) </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//console.log(counterRefImpl.value)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// watch</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 错误的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//watch(counterRefImpl.value, (newValue, oldValue) =&gt; &#123;&#125;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 可以监视到。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(()=&gt;counterRefImpl.value, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;counterRefImpl, data&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="vue3侦听reactive数据"><a href="#vue3侦听reactive数据" class="headerlink" title="vue3侦听reactive数据"></a>vue3侦听reactive数据</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对于reactive函数获取的代理对象，在进行侦听的时候，只能获取到newValue，oldValue无法获取。</span><br><span class="line">对于reactive函数获取的代理对象来说，默认就是开启深度侦听的。</span><br><span class="line">这种深度侦听是无法取消的，配置 deep:false 无效。</span><br><span class="line">解决方法：指定某个属性侦听。</span><br><span class="line">	注意：第一个需要侦听的数据，必须是一个函数。</span><br><span class="line">	注意侦听基本数据类型和对象的区别，</span><br></pre></td></tr></table></figure>

<h5 id="App-vue-7"><a href="#App-vue-7" class="headerlink" title="App.vue"></a>App.vue</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器1：&#123;&#123;data.counter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器2：&#123;&#123;data.a.b.c.d.counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter1++&quot;</span>&gt;</span>1号计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.a.b.c.d.counter2++&quot;</span>&gt;</span>2号计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;watch, reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter1 : <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        a : &#123;</span></span><br><span class="line"><span class="language-javascript">          b : &#123;</span></span><br><span class="line"><span class="language-javascript">            c : &#123;</span></span><br><span class="line"><span class="language-javascript">              d : &#123;</span></span><br><span class="line"><span class="language-javascript">                counter2 : <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// watch</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 对于reactive函数获取的代理对象，在进行侦听的时候，只能获取到newValue，oldValue无法获取。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 对于reactive函数获取的代理对象来说，默认就是开启深度侦听的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这种深度侦听是无法取消的，配置 deep:false 无效。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(data, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue) </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;, &#123;deep : false&#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 怎么办？我不想每一个属性都侦听，我只想指定某个属性侦听。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 只想侦听data中的counter1这个属性。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 注意点：第一个需要侦听的数据，必须是一个函数。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(()=&gt;data.counter1, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue) </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果是这样的，deep设置无效。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(data.a.b, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;, &#123;deep : false&#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果是这样的，deep设置是有效的。(oldValue拿不到)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">watch</span>(<span class="function">()=&gt;</span>data.<span class="property">a</span>.<span class="property">b</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">      &#125;, &#123;deep : <span class="literal">false</span>&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch(()=&gt;data.a.b.c.d.counter2, (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* watch([()=&gt;data.counter1,()=&gt;data.a.b.c.d.counter2], (newValue, oldValue) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(newValue, oldValue) </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="watchEffect组合式API"><a href="#watchEffect组合式API" class="headerlink" title="watchEffect组合式API"></a>watchEffect组合式API</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. watchEffect 函数里面直接写一个回调</span><br><span class="line">(1) 回调中用到哪个属性，当这个属性发生变化的时候，这个回调就会重新执行。</span><br><span class="line">(2) watchEffect(()=&gt;&#123;const a = data.counter1; const b = data.counter2 逻辑代码......&#125;) 当counter1和counter2被</span><br><span class="line">修改后，这个回调就会执行。</span><br><span class="line">2. computed 和 watchEffect 的区别？</span><br><span class="line">(1) computed 注重返回结果。</span><br><span class="line">(2) watchEffect 注重逻辑处理。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-8"><a href="#App-vue-8" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.counter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter1++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter2++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.counter3&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter3++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter1 : <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        counter2 : <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">        counter3 : <span class="number">1000</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 使用watchEffect这个组合式的API。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 作用：也是用来监视的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// watchEffect函数中直接跟一个回调函数即可。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这个回调函数什么时候执行？一开始就先执行一次。然后函数体当中使用到了某个数据。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这个使用到的数据只要发生变化，watchEffect中的回调函数一定会执行一次。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 我这个回调函数当中使用到了data.counter1和data.counter3</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 这个回调函数的执行实际是：只要counter1发生变化，或者counter3发生变化，这个回调函数都会执行。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> a = data.<span class="property">counter1</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> b = data.<span class="property">counter3</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="自定义钩子函数hook函数"><a href="#自定义钩子函数hook函数" class="headerlink" title="自定义钩子函数hook函数"></a>自定义钩子函数hook函数</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将组合式 API 拿出来，封装成一个函数，在需要复用的位置，使用这个 hook 函数。</span><br><span class="line">一般创建一个 hooks 目录，在 hooks 目录当中放 hook 函数。</span><br><span class="line">代码复用。</span><br></pre></td></tr></table></figure>

<h3 id="hooks-x2F-sum-js"><a href="#hooks-x2F-sum-js" class="headerlink" title="hooks&#x2F;sum.js"></a>hooks&#x2F;sum.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// data</span></span><br><span class="line">    <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        num1 : <span class="number">0</span>,</span><br><span class="line">        num2 : <span class="number">0</span>,</span><br><span class="line">        result : <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// methods</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"></span>)&#123;</span><br><span class="line">        data.<span class="property">result</span> = data.<span class="property">num1</span> + data.<span class="property">num2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回一个对象</span></span><br><span class="line">    <span class="keyword">return</span> &#123;data, sum&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-9"><a href="#App-vue-9" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  数字1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.num1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  数字2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.num2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  求和结果：&#123;&#123;data.result&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sum&quot;</span>&gt;</span>求和<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 导入钩子函数</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&#x27;./hooks/sum.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 调用钩子函数</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//let result = sum()</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//return result</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="title function_">sum</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="shallowReactive-和-shallowRef"><a href="#shallowReactive-和-shallowRef" class="headerlink" title="shallowReactive 和 shallowRef"></a>shallowReactive 和 shallowRef</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">浅层次的响应式。</span><br><span class="line">shallowReactive：对象的第一层支持响应式，第二层就不再支持了。</span><br><span class="line">shallowRef：只给基本数据类型添加响应式。如果是对象，则不会支持响应式。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-10"><a href="#App-vue-10" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCounter&quot;</span>&gt;</span>修改计数器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref, shallowRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//let counter = ref(1)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// shallowRef和ref用在基本数据类型上，没有区别。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 数据本身就是基本数据类型，再浅也浅不到哪儿去。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//let counter = shallowRef(1)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//return &#123;counter&#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 当shallowRef和ref都用在对象上的时候。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ref是有响应式的，底层会创建Proxy代理对象。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// shallowRef是没有响应式的，底层也不会创建Proxy对象。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 有的时候，这个对象中的属性可能永远都不可能修改，如果要改，也是更换对象。显然这个时候可以使用shallowRef，进行优化。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">shallowRef</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter : <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">changeCounter</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        data.<span class="property">value</span> = &#123;counter : <span class="number">10000</span>&#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data, changeCounter&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="App-vue-11"><a href="#App-vue-11" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.a.b.c.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.a.b.c.counter++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;data.counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter2++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">shallowReactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter2 : <span class="number">1000</span>,</span></span><br><span class="line"><span class="language-javascript">        a : &#123;</span></span><br><span class="line"><span class="language-javascript">          b : &#123;</span></span><br><span class="line"><span class="language-javascript">            c : &#123;</span></span><br><span class="line"><span class="language-javascript">              counter : <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="组合式-API-和选项式-API-对比"><a href="#组合式-API-和选项式-API-对比" class="headerlink" title="组合式 API 和选项式 API 对比"></a>组合式 API 和选项式 API 对比</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">组合式 API：Composition API(vue3)</span><br><span class="line">选项式 API：Options API(vue2)</span><br><span class="line"></span><br><span class="line">选项式 API：特点是 分散。</span><br><span class="line">组合式 API：特点是 集中 （一个 hook 是一个独立的功能，一个 hook 中有自己的 data、methods、computed、watch）</span><br></pre></td></tr></table></figure>

<h2 id="深只读和浅只读"><a href="#深只读和浅只读" class="headerlink" title="深只读和浅只读"></a>深只读和浅只读</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">组合式 API：readonly 与 shallowReadonly</span><br><span class="line">应用场景：其它组件传递过来的数据，如果不希望你修改，你最好加上只读，以防以后不小心改了人家的数据。</span><br><span class="line">深只读：具有响应式的对象中所有的属性，包括子对象中的子对象中的属性，它的所有值都是只读的不可修改的。</span><br><span class="line">浅只读：具有响应式的对象的第一层属性值是只读的。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-12"><a href="#App-vue-12" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器1：&#123;&#123;data.counter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter1++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器2：&#123;&#123;data.a.b.counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.a.b.counter2++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, readonly, shallowReadonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter1 : <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        a : &#123;</span></span><br><span class="line"><span class="language-javascript">          b : &#123;</span></span><br><span class="line"><span class="language-javascript">            counter2 : <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 深只读（具有响应式的对象中所有的属性，包括子对象中的子对象中的属性，它的所有值都是只读的不可修改的。）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//data = readonly(data)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 浅只读（具有响应式的对象的第一层属性值是只读的）</span></span></span><br><span class="line"><span class="language-javascript">      data = <span class="title function_">shallowReadonly</span>(data)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="响应式数据的判断"><a href="#响应式数据的判断" class="headerlink" title="响应式数据的判断"></a>响应式数据的判断</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">isRef：检查某个值是否为 ref。</span><br><span class="line">isReactive：检查一个对象是否是由 reactive() 或 shallowReactive() 创建的代理。</span><br><span class="line">isProxy：检查一个对象是否是由 reactive()、readonly()、shallowReactive() 或 shallowReadonly() 创建的代理。</span><br><span class="line">isReadonly：检查传入的值是否为只读对象。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-13"><a href="#App-vue-13" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;isRef, ref, isReactive, isProxy, isReadonly, reactive, readonly&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 判断某个数据是否是 ref 的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(counter))</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 判断某个对象是否通过 reactive()或者shallowReactive()获取的代理</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter : <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(data))</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 判断某个对象是否为代理对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(data))</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 判断某个对象是否为只读对象</span></span></span><br><span class="line"><span class="language-javascript">      data = <span class="title function_">readonly</span>(data)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReadonly</span>(data))</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 只读的如果采用isProxy判断的话，如果是只读的，isProxy的结果也是true</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(data))</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="toRef-和-toRefs"><a href="#toRef-和-toRefs" class="headerlink" title="toRef 和 toRefs"></a>toRef 和 toRefs</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">toRef语法格式：toRef(对象, &#x27;该对象中的属性名&#x27;)</span><br><span class="line">toRefs函数用法：toRefs(data)</span><br><span class="line"></span><br><span class="line">toRef函数执行之后会生成一个全新的对象：ObjectRefImpl（引用对象）</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-14"><a href="#App-vue-14" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;data&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器1：&#123;&#123;counter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter1++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器2：&#123;&#123;counter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter2++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器3：&#123;&#123;a.b.counter3&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;a.b.counter3++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, ref, toRef, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter1 : <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        counter2 : <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">        a : &#123;</span></span><br><span class="line"><span class="language-javascript">          b : &#123;</span></span><br><span class="line"><span class="language-javascript">            counter3 : <span class="number">1000</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//return &#123;data&#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这样写肯定不行，因为这种方式第一次打开页面的时候，能够看到数据，但是不是响应式的。因为这个数据和data无关了。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 并不是具有响应式的data对象了。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter1 : data.counter1,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter2 : data.counter2,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter3 : data.a.b.counter3</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这种方式可以完成响应式。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 问题是什么？计数器加1的时候，data对象中的数据不会变。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        data,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter1 : ref(data.counter1),</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter2 : ref(data.counter2),</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter3 : ref(data.a.b.counter3)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// toRef</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// toRef语法格式：toRef(对象, &#x27;该对象中的属性名&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// toRef函数执行之后会生成一个全新的对象：ObjectRefImpl（引用对象）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 只要有引用对象，就有value属性，并且value属性是响应式的。(value有对应的set和get。)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//console.log(toRef(data, &#x27;counter1&#x27;))</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/* return &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        data,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter1 : toRef(data, &#x27;counter1&#x27;),</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter2 : toRef(data, &#x27;counter2&#x27;),</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter3 : toRef(data.a.b, &#x27;counter3&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// toRefs</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// toRefs函数用法：toRefs(data)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">toRefs</span>(data)) <span class="comment">// 这个生成的是一个对象</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        data,</span></span><br><span class="line"><span class="language-javascript">        ...<span class="title function_">toRefs</span>(data)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="转换为原始-amp-标记为原始"><a href="#转换为原始-amp-标记为原始" class="headerlink" title="转换为原始&amp;标记为原始"></a>转换为原始&amp;标记为原始</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">toRaw 与 markRaw</span><br><span class="line">toRaw：将响应式对象转换为普通对象。只适用于 reactive 生成的响应式对象。</span><br><span class="line">markRaw：标记某个对象，让这个对象永远都不具备响应式。比如在集成一些第三方库的时候，比如有一个巨大的只读列表，不让其具备响应式是一种性能优化。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-15"><a href="#App-vue-15" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器1：&#123;&#123;data.counter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.counter1++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器2：&#123;&#123;data.x&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;data.x.counter2++&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getRawObject&quot;</span>&gt;</span>获取data的原始对象<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addX&quot;</span>&gt;</span>给data扩展一个x属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, toRaw, markRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data </span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data是具备响应式的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> data = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        counter1 : <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 获取data这个响应式对象的原始对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 操作原始对象的时候，没有响应式处理的。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">getRawObject</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// rawObj就是一个原始对象，是data的原始对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> rawObj = <span class="title function_">toRaw</span>(data)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 修改原始对象，不会具有响应式</span></span></span><br><span class="line"><span class="language-javascript">        rawObj.<span class="property">counter1</span>++</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;原始对象&#x27;</span>, rawObj)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 给data扩展一个x属性。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">addX</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 给data扩展一个x属性</span></span></span><br><span class="line"><span class="language-javascript">        data.<span class="property">x</span> = <span class="title function_">markRaw</span>(&#123;counter2 : <span class="number">100</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;data, getRawObject, addX&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Fragment-组件"><a href="#Fragment-组件" class="headerlink" title="Fragment 组件"></a>Fragment 组件</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fragment 翻译为：碎片。片段。</span><br><span class="line">在 Vue2 中每个组件必须有一个根标签。这样性能方面稍微有点问题，如果每一个组件必须有根标签，组件嵌套</span><br><span class="line">组件的时候，有很多无用的根标签。</span><br><span class="line">在 Vue3 中每个组件不需要有根标签。实际上内部实现的时候，最终将所有组件嵌套好之后，最外层会添加一个</span><br><span class="line">Fragment，用这个 fragment 当做根标签。这是一种性能优化策略。</span><br></pre></td></tr></table></figure>

<h2 id="Teleport-组件"><a href="#Teleport-组件" class="headerlink" title="Teleport 组件"></a>Teleport 组件</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">teleport 翻译为：远距离传送。用于设置组件的显示位置。</span><br><span class="line">&lt;teleport to=&#x27;标签名&#x27;&gt;&lt;/teleport&gt;</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-16"><a href="#App-vue-16" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是App组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">YeYe</span>&gt;</span><span class="tag">&lt;/<span class="name">YeYe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">YeYe</span> <span class="keyword">from</span> <span class="string">&#x27;./components/YeYe.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">YeYe</span>&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.s1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: aquamarine;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="YeYe-vue"><a href="#YeYe-vue" class="headerlink" title="YeYe.vue"></a>YeYe.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是爷爷组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ErZi</span>&gt;</span><span class="tag">&lt;/<span class="name">ErZi</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">ErZi</span> <span class="keyword">from</span> <span class="string">&#x27;./ErZi.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;YeYe&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        components : &#123;<span class="title class_">ErZi</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s2</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: bisque;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ErZi"><a href="#ErZi" class="headerlink" title="ErZi"></a>ErZi</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是儿子组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">SunZi</span>&gt;</span><span class="tag">&lt;/<span class="name">SunZi</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">SunZi</span> <span class="keyword">from</span> <span class="string">&#x27;./SunZi.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;ErZi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        components : &#123;<span class="title class_">SunZi</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s3</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>:chartreuse;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="SunZi"><a href="#SunZi" class="headerlink" title="SunZi"></a>SunZi</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是孙子组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = true&quot;</span>&gt;</span>弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 遮罩层，一会整个遮罩层要瞬移到body下面 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 模态窗口 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s&quot;</span>&gt;</span></span><br><span class="line">                    我是一个窗口.....</span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;SunZi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> isShow = <span class="title function_">ref</span>(<span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;isShow&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s4</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: darkmagenta;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* opacity: 90%; */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: darkgrey;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="隔代数据传递"><a href="#隔代数据传递" class="headerlink" title="隔代数据传递"></a>隔代数据传递</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">provide提供数据</span><br><span class="line">inject注入数据</span><br><span class="line">这种方式比较适合于使用在祖宗给后代组件传递数据的情况</span><br><span class="line"></span><br><span class="line">provide在祖宗组件中使用，inject在后代组件中使用</span><br><span class="line"></span><br><span class="line">导入函数</span><br><span class="line">provide(&#x27;name&#x27;, data)</span><br><span class="line">inject(&#x27;name&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-17"><a href="#App-vue-17" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是App组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">YeYe</span>&gt;</span><span class="tag">&lt;/<span class="name">YeYe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">YeYe</span> <span class="keyword">from</span> <span class="string">&#x27;./components/YeYe.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    components : &#123;<span class="title class_">YeYe</span>&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.s1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: aquamarine;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="YeYe-vue-1"><a href="#YeYe-vue-1" class="headerlink" title="YeYe.vue"></a>YeYe.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是爷爷组件（&#123;&#123;counter&#125;&#125;）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ErZi</span>&gt;</span><span class="tag">&lt;/<span class="name">ErZi</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;provide, ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">ErZi</span> <span class="keyword">from</span> <span class="string">&#x27;./ErZi.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;YeYe&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        components : &#123;<span class="title class_">ErZi</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 在祖宗组件中使用provide提供数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">provide</span>(<span class="string">&#x27;c&#x27;</span>, counter)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;counter&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s2</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: bisque;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ErZi-1"><a href="#ErZi-1" class="headerlink" title="ErZi"></a>ErZi</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是儿子组件（&#123;&#123;counter&#125;&#125;）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">SunZi</span>&gt;</span><span class="tag">&lt;/<span class="name">SunZi</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">SunZi</span> <span class="keyword">from</span> <span class="string">&#x27;./SunZi.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;ErZi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        components : &#123;<span class="title class_">SunZi</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 注入</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> counter = <span class="title function_">inject</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;counter&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s3</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>:chartreuse;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="SunZi-1"><a href="#SunZi-1" class="headerlink" title="SunZi"></a>SunZi</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是孙子组件（&#123;&#123;counter&#125;&#125;）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = true&quot;</span>&gt;</span>弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 遮罩层，一会整个遮罩层要瞬移到body下面 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 模态窗口 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;s&quot;</span>&gt;</span></span><br><span class="line">                    我是一个窗口.....</span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;ref, inject&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        name : <span class="string">&#x27;SunZi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> isShow = <span class="title function_">ref</span>(<span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 注入inject</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> counter = <span class="title function_">inject</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;isShow, counter&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s4</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: darkmagenta;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.s</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* opacity: 90%; */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: darkgrey;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="watch方式实现延迟显示"><a href="#watch方式实现延迟显示" class="headerlink" title="watch方式实现延迟显示"></a>watch方式实现延迟显示</h2><h3 id="App-vue-18"><a href="#App-vue-18" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  &#123;&#123;newName&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref, watch&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> newName = <span class="title function_">ref</span>(name.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 侦听属性</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">watch</span>(name, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          newName.<span class="property">value</span> = newValue</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;name, newName&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="自定义ref"><a href="#自定义ref" class="headerlink" title="自定义ref"></a>自定义ref</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ref是一个函数,像这种函数是可以程序员自己定义属于自己的ref.</span><br><span class="line">自己定义的ref同样具有响应式。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-19"><a href="#App-vue-19" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  &#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref, customRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    name : <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 使用Vue3内置的ref</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//let name = ref(&#x27;test&#x27;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 创建一个防抖 ref</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 以下这个代码就是真正的属于自己定义的ref了。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ref是一个函数，那么我们自定义的ref同样是一个函数。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">useDebouncedRef</span>(<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> t</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 自定义的ref这个函数体当中的代码不能随便写，必须符合ref规范。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 通过调用customRef函数来获取一个自定义的ref对象。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 调用customRef函数的时候必须给该函数传递一个回调：这个回调可以叫做factory</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 对于这个回调函数来说，有两个非常重要的参数：track是追踪。trigger是触发。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> x = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 对于这个factory回调来说，必须返回一个对象，并且对象中要有get</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 模板语句中只要使用到该数据，get会自动调用。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get执行了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// 告诉Vue去追踪这个value的变化</span></span></span><br><span class="line"><span class="language-javascript">              <span class="title function_">track</span>()</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span> value</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 当模板语句中修改该数据的时候，set会自动调用。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">set</span>(<span class="params">newValue</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;set执行了&#x27;</span>, newValue)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">clearTimeout</span>(t)</span></span><br><span class="line"><span class="language-javascript">              t = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                value = newValue</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 触发(通知去调用get方法)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">trigger</span>()  </span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 返回自定义的ref对象实例。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> x</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 使用自定义的ref同样具备响应式。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> name = <span class="title function_">useDebouncedRef</span>(<span class="string">&#x27;test&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;name&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="setup语法糖"><a href="#setup语法糖" class="headerlink" title="setup语法糖"></a>setup语法糖</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">子组件只需要导入引用，不用注册组件。</span><br></pre></td></tr></table></figure>

<h3 id="App-vue-20"><a href="#App-vue-20" class="headerlink" title="App.vue"></a>App.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计数器：&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>计数器加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">User</span>&gt;</span><span class="tag">&lt;/<span class="name">User</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./components/User.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// data</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// methods</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    counter.<span class="property">value</span>++</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// watch</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// computed</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ....</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* export default &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    name : &#x27;App&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    setup()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // data</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      let counter = ref(100)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // methods</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      function add()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        counter.value++</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // watch</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // computed</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // ....</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 返回一个对象</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      return &#123;counter, add&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">  &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="User-vue-4"><a href="#User-vue-4" class="headerlink" title="User.vue"></a>User.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个User组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Tsang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ztq1352.github.io/2023/06/19/vue09/">https://ztq1352.github.io/2023/06/19/vue09/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ztq1352.github.io" target="_blank">Tsang的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue/">vue</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/15/vue08/"><img class="prev-cover" src="https://s1.ax1x.com/2023/06/15/pCKbFpD.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vue学习(八)</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/13/Microservice01/"><img class="next-cover" src="https://s1.ax1x.com/2023/07/13/pChRzJH.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">微服务初识</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/06/08/vue01/" title="Vue学习(一)"><img class="cover" src="https://s1.ax1x.com/2023/06/07/pCFIk1e.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-08</div><div class="title">Vue学习(一)</div></div></a></div><div><a href="/2023/06/08/vue02/" title="Vue学习(二)"><img class="cover" src="https://s1.ax1x.com/2023/06/08/pCAZ726.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-08</div><div class="title">Vue学习(二)</div></div></a></div><div><a href="/2023/06/10/vue03/" title="Vue学习(三)"><img class="cover" src="https://s1.ax1x.com/2023/06/10/pCVMTz9.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-10</div><div class="title">Vue学习(三)</div></div></a></div><div><a href="/2023/06/12/vue05/" title="Vue学习(五)"><img class="cover" src="https://s1.ax1x.com/2023/06/12/pCeULPs.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-12</div><div class="title">Vue学习(五)</div></div></a></div><div><a href="/2023/06/11/vue04/" title="Vue学习(四)"><img class="cover" src="https://s1.ax1x.com/2023/06/11/pCZVZVg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-11</div><div class="title">Vue学习(四)</div></div></a></div><div><a href="/2023/06/13/vue06/" title="Vue学习(六)"><img class="cover" src="https://s1.ax1x.com/2023/06/13/pCm4W9I.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-13</div><div class="title">Vue学习(六)</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://s1.ax1x.com/2023/05/25/p9HMD0J.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Tsang</div><div class="author-info__description">要自信！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ztq1352" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ztq1352@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3"><span class="toc-number">1.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3Vue3"><span class="toc-number">1.1.</span> <span class="toc-text">了解Vue3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E5%B7%A5%E7%A8%8B%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">vue3工程创建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-cli%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BAvue3"><span class="toc-number">1.2.1.</span> <span class="toc-text">vue -cli脚手架创建vue3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#create-vue%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.2.</span> <span class="toc-text">create-vue脚手架创建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">vue3工程说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Proxy%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">Proxy实现原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">1.3.</span> <span class="toc-text">setup配置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue"><span class="toc-number">1.3.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref%E5%87%BD%E6%95%B0-%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">ref函数(实现响应式)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref%E5%87%BD%E6%95%B0%E5%8C%85%E8%A3%B9%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">ref函数包裹对象实现响应式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reactive%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">reactive函数实现响应式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E4%B8%AD%E7%9A%84props"><span class="toc-number">1.7.</span> <span class="toc-text">vue3中的props</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-1"><span class="toc-number">1.7.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-vue"><span class="toc-number">1.7.2.</span> <span class="toc-text">User.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.</span> <span class="toc-text">vue3生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-2"><span class="toc-number">1.8.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-vue-1"><span class="toc-number">1.8.2.</span> <span class="toc-text">User.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">vue3的自定义事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#User-vue-2"><span class="toc-number">1.9.1.</span> <span class="toc-text">User.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E7%9A%84%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-number">1.10.</span> <span class="toc-text">vue3的全局事件总线</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#event-bus-js"><span class="toc-number">1.10.1.</span> <span class="toc-text">event-bus.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-3"><span class="toc-number">1.10.2.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-vue-3"><span class="toc-number">1.10.3.</span> <span class="toc-text">User.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E7%9A%84%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">1.11.</span> <span class="toc-text">vue3的计算属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-4"><span class="toc-number">1.11.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E4%BE%A6%E5%90%AC%E5%B1%9E%E6%80%A7"><span class="toc-number">1.12.</span> <span class="toc-text">vue3侦听属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3%E4%BE%A6%E5%90%ACref%E6%95%B0%E6%8D%AE"><span class="toc-number">1.12.0.1.</span> <span class="toc-text">vue3侦听ref数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#App-vue-5"><span class="toc-number">1.12.0.1.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#App-vue-6"><span class="toc-number">1.12.0.1.2.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3%E4%BE%A6%E5%90%ACreactive%E6%95%B0%E6%8D%AE"><span class="toc-number">1.12.0.2.</span> <span class="toc-text">vue3侦听reactive数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#App-vue-7"><span class="toc-number">1.12.0.2.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watchEffect%E7%BB%84%E5%90%88%E5%BC%8FAPI"><span class="toc-number">1.13.</span> <span class="toc-text">watchEffect组合式API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-8"><span class="toc-number">1.13.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0hook%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.</span> <span class="toc-text">自定义钩子函数hook函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hooks-x2F-sum-js"><span class="toc-number">1.14.1.</span> <span class="toc-text">hooks&#x2F;sum.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-9"><span class="toc-number">1.14.2.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shallowReactive-%E5%92%8C-shallowRef"><span class="toc-number">1.15.</span> <span class="toc-text">shallowReactive 和 shallowRef</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-10"><span class="toc-number">1.15.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-11"><span class="toc-number">1.15.2.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8F-API-%E5%92%8C%E9%80%89%E9%A1%B9%E5%BC%8F-API-%E5%AF%B9%E6%AF%94"><span class="toc-number">1.16.</span> <span class="toc-text">组合式 API 和选项式 API 对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%8F%AA%E8%AF%BB%E5%92%8C%E6%B5%85%E5%8F%AA%E8%AF%BB"><span class="toc-number">1.17.</span> <span class="toc-text">深只读和浅只读</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-12"><span class="toc-number">1.17.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-number">1.18.</span> <span class="toc-text">响应式数据的判断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-13"><span class="toc-number">1.18.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRef-%E5%92%8C-toRefs"><span class="toc-number">1.19.</span> <span class="toc-text">toRef 和 toRefs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-14"><span class="toc-number">1.19.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%8E%9F%E5%A7%8B-amp-%E6%A0%87%E8%AE%B0%E4%B8%BA%E5%8E%9F%E5%A7%8B"><span class="toc-number">1.20.</span> <span class="toc-text">转换为原始&amp;标记为原始</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-15"><span class="toc-number">1.20.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fragment-%E7%BB%84%E4%BB%B6"><span class="toc-number">1.21.</span> <span class="toc-text">Fragment 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Teleport-%E7%BB%84%E4%BB%B6"><span class="toc-number">1.22.</span> <span class="toc-text">Teleport 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-16"><span class="toc-number">1.22.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YeYe-vue"><span class="toc-number">1.22.2.</span> <span class="toc-text">YeYe.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ErZi"><span class="toc-number">1.22.3.</span> <span class="toc-text">ErZi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SunZi"><span class="toc-number">1.22.4.</span> <span class="toc-text">SunZi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%94%E4%BB%A3%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">1.23.</span> <span class="toc-text">隔代数据传递</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-17"><span class="toc-number">1.23.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YeYe-vue-1"><span class="toc-number">1.23.2.</span> <span class="toc-text">YeYe.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ErZi-1"><span class="toc-number">1.23.3.</span> <span class="toc-text">ErZi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SunZi-1"><span class="toc-number">1.23.4.</span> <span class="toc-text">SunZi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%BB%B6%E8%BF%9F%E6%98%BE%E7%A4%BA"><span class="toc-number">1.24.</span> <span class="toc-text">watch方式实现延迟显示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-18"><span class="toc-number">1.24.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89ref"><span class="toc-number">1.25.</span> <span class="toc-text">自定义ref</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-19"><span class="toc-number">1.25.1.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">1.26.</span> <span class="toc-text">setup语法糖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue-20"><span class="toc-number">1.26.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-vue-4"><span class="toc-number">1.26.2.</span> <span class="toc-text">User.vue</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/04/linux01/" title="linux基础"><img src="https://s1.ax1x.com/2023/07/13/pChRzJH.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux基础"/></a><div class="content"><a class="title" href="/2023/08/04/linux01/" title="linux基础">linux基础</a><time datetime="2023-08-04T06:34:34.036Z" title="发表于 2023-08-04 14:34:34">2023-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/13/Microservice01/" title="微服务初识"><img src="https://s1.ax1x.com/2023/07/13/pChRzJH.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微服务初识"/></a><div class="content"><a class="title" href="/2023/07/13/Microservice01/" title="微服务初识">微服务初识</a><time datetime="2023-07-13T07:58:01.680Z" title="发表于 2023-07-13 15:58:01">2023-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/19/vue09/" title="Vue学习(九)"><img src="https://s1.ax1x.com/2023/06/19/pC3VkWV.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue学习(九)"/></a><div class="content"><a class="title" href="/2023/06/19/vue09/" title="Vue学习(九)">Vue学习(九)</a><time datetime="2023-06-19T08:10:25.320Z" title="发表于 2023-06-19 16:10:25">2023-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/15/vue08/" title="Vue学习(八)"><img src="https://s1.ax1x.com/2023/06/15/pCKbFpD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue学习(八)"/></a><div class="content"><a class="title" href="/2023/06/15/vue08/" title="Vue学习(八)">Vue学习(八)</a><time datetime="2023-06-15T13:22:13.381Z" title="发表于 2023-06-15 21:22:13">2023-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/14/vue07/" title="Vue学习(七)"><img src="https://s1.ax1x.com/2023/06/14/pCuF3C9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue学习(七)"/></a><div class="content"><a class="title" href="/2023/06/14/vue07/" title="Vue学习(七)">Vue学习(七)</a><time datetime="2023-06-14T14:29:42.092Z" title="发表于 2023-06-14 22:29:42">2023-06-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.ax1x.com/2023/06/19/pC3VkWV.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Tsang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>